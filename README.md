# moni-talks

### Environment Variables Required to bootstrap this project
| Key | Environment Variable | Default |
| ------------- | -------- | ------ |
| NODE_ENV | NODE_ENV | local |
| PORT | PORT | 80 |
| DB_HOST | DB_HOST | localhost |
| DB_DATABASE | DB_DATABASE | moni |
| DB_PORT | DB_PORT | 3306 |
| DB_USER | DB_USER | user |
| DB_PASSWORD | DB_PASSWORD | user |
| APP_NAME | APP_NAME | MoniTalks |
| WEBHOOK_HASHER | WEBHOOK_HASHER | xyz |
| JWT_HASHER | JWT_HASHER | abc |


### Dependencies
- Node >=20.10.0
- Mongo 4.4.0
- MySQL 8


### Creating Database Migrations
- Run `npm run create-migration --name=<filename>`
- Go to `migrations


### Database Migration Scripts

**Note:** In the spirit of good security practice, kindly DO NOT commit queries that have sensitive information like secrets, passwords and keys to repository.

NPM scripts
- `migrate`: run outstanding migrations for the database configured for the folder
- `rollback`: rollback one database migration
- `migrate-dry-run`: generate sql queries to be executed without executing them
- `rollback-dry-run`: generate rollback sql queries without executing them
- `create-migration`: generate generate a new migration file
  - You will need to supply a name for your migration, e.g. `npm run create-migration --name=update-xxx-account-name`
  - The scripts are created in the `migrations/sqls` folder. You only need to modify the `up` and `down` scripts as needed.
- `validate-migration`: validate that the sql generated by the migrations are valid